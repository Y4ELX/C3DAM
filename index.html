<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Probar Cámara Compatibilidad</title>
</head>
<body>

<button id="startButton">Iniciar Cámara</button>
<video id="video" style="width:100%; max-width:400px; display:none;" autoplay muted playsinline></video>
<div id="error" style="color:red;"></div>

<script>
const startButton = document.getElementById('startButton');
const video = document.getElementById('video');
const errorDiv = document.getElementById('error');

function startCamera() {
  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // Forma moderna
    navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
      .then(stream => {
        video.srcObject = stream;
        video.style.display = 'block';
        startButton.style.display = 'none';
      })
      .catch(err => {
        console.error(err);
        errorDiv.innerText = "No se pudo acceder a la cámara: " + err.message;
      });
  } else if (navigator.getUserMedia) {
    // Forma antigua
    navigator.getUserMedia(
      { video: true },
      stream => {
        video.srcObject = stream;
        video.style.display = 'block';
        startButton.style.display = 'none';
      },
      err => {
        console.error(err);
        errorDiv.innerText = "No se pudo acceder a la cámara: " + err.message;
      }
    );
  } else {
    errorDiv.innerText = "Tu navegador no soporta acceso a la cámara.";
  }
}

startButton.onclick = startCamera;
</script>

</body>
</html>
